/*!
 * Valine v2.0.0
 * (c) 2017-2018 xCss
 * Released under the GPL-2.0 License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Valine=t():e.Valine=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([,function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e){function t(e){if(e&&"Object"===r(e)){if(-1!==n.indexOf(e))return!0;n.push(e);for(var i in e)if(!0===e.hasOwnProperty(i)&&t(e[i]))return!0}return!1}var n=[];return t(e)}var o=function e(t){var n=t;if(null!==t&&void 0!==t){switch(r(t)){case"Date":(new Date).setTime(t.getTime()),n=cloneDate;break;case"Object":if(!i(t)){var o={};for(var a in t)o[a]=e(t[a]);n=o}break;case"Array":for(var u=[],c=0;c<t.length;c++)u.push(e(t[c]));n=u}return n}};e.exports=o},,function(e,t,n){"use strict";function r(e){var t=this;return t.initialized=!1,e&&t.init(e),t}function i(e){return new r(e)}var o=n(1);r.prototype.init=function(e){var t=this,n=e&&(e.appId||e.app_id)||"",r=e&&(e.appKey||e.app_key)||"",i=["cn","us"],a=(e&&e.region||"cn").toLowerCase();if(a=i.indexOf(a)>-1?a:i[0],!n||!r)throw new Error("AV init failed. appId or appKey is null.");if(t.initialized)throw new Error("AV has been initialized.");return t.options=e,t.v=o(AV),t.v.init({appId:n,appKey:r,region:a}),t.initialized=!0,t},r.prototype.createACL=function(e,t){var n=this,r=new n.v.ACL;return e="boolean"!=typeof e||e,t="boolean"!=typeof t||t,r.setPublicReadAccess(e),r.setPublicWriteAccess(t),r},r.prototype.insert=function(e){var t=this;t.isInit();var n=t.v.Object.extend("Comment"),r=new n;e.insertedAt=new Date;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];r.set(i,o)}return r.setACL(t.createACL(!0,!1)),r.save()},r.prototype.query=function(e,t,n,r){var i=this;i.isInit();var o=new i.v.Query(n);return!!r&&o.containsAll(e,t)||o.equalTo(e,t),"Comment"==calzz&&(o.addDescending("createdAt"),o.addDescending("insertedAt")),o},r.prototype.increment=function(e){var t=this;t.isInit();var n=e.url||"",r=e.title||"",i=e.clazz||"Counter";if(!n)throw new Error("Counter identification can not be empty.");return t.Query("url",n,i).then(function(e){var o=null;if(e.length)return o=e[0],o.fetchWhenSave(!0),o.increment("time"),o.save();var a=t.v.Object.extend(i),u=new a;return u.setACL(t.createACL()),u.set("url",n),u.set("title",r),u.set("time",1),u.save()})},r.prototype.isInit=function(){if(!this.initialized)throw new Error("AV has not been initialized yet.");return!0},e.exports=i}])});